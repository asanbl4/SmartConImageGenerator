from dotenv import load_dotenv
import os
from poe_api_wrapper import AsyncPoeApi
import asyncio

load_dotenv()


tokens = {
    'p-b': os.getenv("POE_P_B"),
    'p-lat': os.getenv("POE_P_LAT"),
}


async def main(message="Explain quantum computing in simple terms"):
    client = await AsyncPoeApi(tokens=tokens).create()
    async for chunk in client.send_message(bot="gpt4_o", message=message):
        print(chunk["response"], end='', flush=True)


if __name__ == '__main__':
    asyncio.run(main("""[{"TRANSACTION_DATE":"2024-10-29","TRANSACTION_COUNT":43181},{"TRANSACTION_DATE":"2024-10-28","TRANSACTION_COUNT":188390},{"TRANSACTION_DATE":"2024-10-27","TRANSACTION_COUNT":132653},{"TRANSACTION_DATE":"2024-10-26","TRANSACTION_COUNT":135180},{"TRANSACTION_DATE":"2024-10-25","TRANSACTION_COUNT":143238},{"TRANSACTION_DATE":"2024-10-24","TRANSACTION_COUNT":142173},{"TRANSACTION_DATE":"2024-10-23","TRANSACTION_COUNT":152797},{"TRANSACTION_DATE":"2024-10-22","TRANSACTION_COUNT":157677},{"TRANSACTION_DATE":"2024-10-21","TRANSACTION_COUNT":132869},{"TRANSACTION_DATE":"2024-10-20","TRANSACTION_COUNT":127172},{"TRANSACTION_DATE":"2024-10-19","TRANSACTION_COUNT":119213},{"TRANSACTION_DATE":"2024-10-18","TRANSACTION_COUNT":123071},{"TRANSACTION_DATE":"2024-10-17","TRANSACTION_COUNT":124297},{"TRANSACTION_DATE":"2024-10-16","TRANSACTION_COUNT":117511},{"TRANSACTION_DATE":"2024-10-15","TRANSACTION_COUNT":122757},{"TRANSACTION_DATE":"2024-10-14","TRANSACTION_COUNT":111602},{"TRANSACTION_DATE":"2024-10-13","TRANSACTION_COUNT":98510},{"TRANSACTION_DATE":"2024-10-12","TRANSACTION_COUNT":108511},{"TRANSACTION_DATE":"2024-10-11","TRANSACTION_COUNT":112669},{"TRANSACTION_DATE":"2024-10-10","TRANSACTION_COUNT":128966}]
"""))